(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1578ef7a"],{"37c2":function(t,e,a){},7109:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-card",{staticStyle:{"margin-bottom":"20px"}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"状态码"}},[a("a-select",{attrs:{placeholder:"请选择状态码"},model:{value:t.search.status,callback:function(e){t.$set(t.search,"status",e)},expression:"search.status"}},[a("a-select-option",{attrs:{value:"200"}},[t._v("200")]),a("a-select-option",{attrs:{value:"400"}},[t._v("400")]),a("a-select-option",{attrs:{value:"401"}},[t._v("401")]),a("a-select-option",{attrs:{value:"403"}},[t._v("403")]),a("a-select-option",{attrs:{value:"404"}},[t._v("404")]),a("a-select-option",{attrs:{value:"405"}},[t._v("405")]),a("a-select-option",{attrs:{value:"500"}},[t._v("500")])],1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"路径"}},[a("a-input",{attrs:{placeholder:"请输入路径"},model:{value:t.search.path,callback:function(e){t.$set(t.search,"path",e)},expression:"search.path"}})],1)],1),t.advanced?[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"租户Id"}},[a("a-input",{attrs:{placeholder:"请输入租户Id"},model:{value:t.search.tenantId,callback:function(e){t.$set(t.search,"tenantId",e)},expression:"search.tenantId"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"userAgent"}},[a("a-input",{attrs:{placeholder:"请输入userAgent"},model:{value:t.search.userAgent,callback:function(e){t.$set(t.search,"userAgent",e)},expression:"search.userAgent"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"请求时间ms"}},[a("a-input",{attrs:{placeholder:"返回大于该时间的请求"},model:{value:t.search.gtMilliSecond,callback:function(e){t.$set(t.search,"gtMilliSecond",e)},expression:"search.gtMilliSecond"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"请求日期"}},[a("a-range-picker",{staticStyle:{width:"100%"},attrs:{placeholder:["开始日期","结束日期"],value:t.dates},on:{change:t.handleDateChange}})],1)],1)]:t._e(),a("a-col",{attrs:{md:t.advanced?24:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:t.query}},[t._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"redo"},on:{click:t.redo}},[t._v("重置")]),a("a",{staticStyle:{"margin-left":"8px"},on:{click:t.toggleAdvanced}},[t._v(" "+t._s(t.advanced?"收起":"展开")+" "),a("a-icon",{attrs:{type:t.advanced?"up":"down"}})],1)],1)])],2)],1)],1)]),a("a-row",{attrs:{gutter:4}},[a("a-col",{attrs:{span:6}},[a("a-card",[a("a-list",{attrs:{"data-source":t.data,loading:t.loading,pagination:t.pagination},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{key:"item.id"},[a("a-col",{attrs:{span:2}},[["GET"===e.method?a("a-tag",{attrs:{color:"#31B404"}},[t._v("GET")]):"POST"===e.method?a("a-tag",{attrs:{color:"#FF8000"}},[t._v("POST")]):"DELETE"===e.method?a("a-tag",{attrs:{color:"#FF4000"}},[t._v("DELETE")]):a("a-tag",{attrs:{color:"blue"}},[t._v(t._s(e.method))])]],2),a("a-col",{attrs:{span:18}},[a("a",{class:t.clickId===e.id?"red":"",staticStyle:{"margin-left":"10px"},on:{click:function(a){return t.toDetail(e.id)}}},[t._v(" "+t._s(e.path)+" ")])]),a("a-col",{attrs:{span:2}},[["200"===e.status?a("a-tag",{attrs:{color:"green"}},[t._v(" "+t._s(e.status)+" ")]):a("a-tag",{attrs:{color:"red"}},[t._v(" "+t._s(e.status)+" ")])]],2)],1)}}])})],1)],1),a("a-col",{attrs:{span:18}},[void 0!==t.detail?a("a-card",[a("a-descriptions",{attrs:{size:"small",column:2}},[a("a-descriptions-item",{attrs:{label:"Method"}},["GET"===JSON.parse(t.detail.request).method?a("a-tag",{attrs:{color:"#31B404"}},[t._v("GET")]):"POST"===JSON.parse(t.detail.request).method?a("a-tag",{attrs:{color:"#FF8000"}},[t._v("POST")]):"DELETE"===JSON.parse(t.detail.request).method?a("a-tag",{attrs:{color:"#FF4000"}},[t._v("DELETE")]):a("a-tag",{attrs:{color:"blue"}},[t._v(t._s(JSON.parse(t.detail.request).method))])],1),a("a-descriptions-item",{attrs:{label:"Status"}},["200"===t.detail.status?a("span",{staticStyle:{color:"green"}},[t._v(" "+t._s(t.detail.status+" OK")+" ")]):a("span",{staticStyle:{color:"red"}},[t._v(" "+t._s(t.detail.status)+" ")])]),a("a-descriptions-item",{attrs:{label:"Time"}},[t._v(" "+t._s(t.detail.duration+"ms")+" ")]),a("a-descriptions-item",{attrs:{label:"请求时间"}},[t._v(" "+t._s(t.$dateFormat(t.detail.createAt))+" ")]),a("a-descriptions-item",{attrs:{label:"URI"}},[a("a",{attrs:{href:t.detail.uri}},[t._v(" "+t._s(t.detail.uri)+" ")])])],1),a("a-tabs",{on:{change:t.change},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}},[a("a-tab-pane",{key:2,attrs:{tab:"Request"}}),a("a-tab-pane",{key:3,attrs:{tab:"Response"}}),a("a-tab-pane",{key:1,attrs:{tab:"更多信息"}})],1),1===t.key?a("a-card",{attrs:{bordered:!1}},[a("a-descriptions",{attrs:{size:"small",column:1}},[a("a-descriptions-item",{attrs:{label:"域名"}},[t._v(" "+t._s(t.detail.domain)+" ")]),a("a-descriptions-item",{attrs:{label:"租户Id"}},[t._v(" "+t._s(t.detail.tenantId)+" ")]),a("a-descriptions-item",{attrs:{label:"路径"}},[t._v(" "+t._s(t.detail.path)+" ")]),a("a-descriptions-item",{attrs:{label:"请求ip"}},[t._v(" "+t._s(t.detail.ip)+" ")]),a("a-descriptions-item",{attrs:{label:"userAgent"}},[t._v(" "+t._s(t.detail.userAgent)+" ")]),a("a-descriptions-item",{attrs:{label:"correlation"}},[t._v(" "+t._s(t.detail.correlation)+" ")]),a("a-descriptions-item",{attrs:{label:"osFamily"}},[t._v(" "+t._s(t.detail.osFamily)+" ")])],1)],1):t._e(),2===t.key?a("a-card",{attrs:{bordered:!1}},[this.requestBody?a("a-button",{attrs:{type:"primary"},on:{click:t.handleRequestChange}},[t._v(t._s(t.requestDetail?"切换简略":"切换详细"))]):t._e(),a("a-descriptions",{attrs:{size:"small",column:1}},[a("a-descriptions-item",[t.requestDetail?a("JsonView",{attrs:{json:JSON.parse(t.detail.request)}}):a("JsonView",{attrs:{json:t.requestBody}})],1)],1)],1):t._e(),3===t.key?a("a-card",{attrs:{bordered:!1}},[a("a-descriptions",{attrs:{size:"small",column:1}},[a("a-descriptions-item",[a("a-button",{attrs:{type:"primary"},on:{click:t.handleResponseChange}},[t._v(t._s(t.responseDetail?"切换简略":"切换详细"))]),t.responseDetail?a("JsonView",{attrs:{json:JSON.parse(t.detail.response)}}):a("JsonView",{attrs:{json:t.responseBody}})],1)],1)],1):t._e()],1):t._e()],1)],1)],1)},i=[],r=(a("4160"),a("b64b"),a("ac1f"),a("841c"),a("159b"),a("00d0")),n=a("0c6d"),o=a("b775"),l={getTracePage:function(t){return Object(n["a"])("/traces",r["a"].GET,t)},getTraceDetail:function(t){return Object(n["a"])("/traces/"+t.id,r["a"].GET)}};function c(t){return Object(o["b"])(l.getTracePage(t))}function d(t){return Object(o["b"])(l.getTraceDetail(t))}var u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bgView"},[a("div",{class:["json-view",t.length?"closeable":""],style:"font-size:"+t.fontSize+"px"},[t.length?a("span",{class:["angle",t.innerclosed?"closed":""],on:{click:t.toggleClose}}):t._e(),a("div",{staticClass:"content-wrap"},[a("p",{staticClass:"first-line"},[t.jsonKey?a("span",{staticClass:"json-key"},[t._v('"'+t._s(t.jsonKey)+'": ')]):t._e(),t.length?a("span",[t._v(" "+t._s(t.prefix)+" "+t._s(t.innerclosed?"..."+t.subfix:"")+" "),a("span",{staticClass:"json-note"},[t._v(" "+t._s(t.innerclosed?" // count: "+t.length:"")+" ")])]):t._e(),t.length?t._e():a("span",[t._v(t._s(t.isArray?"[]":"{}"))])]),!t.innerclosed&&t.length?a("div",{staticClass:"json-body"},[t._l(t.items,(function(e,s){return[e.isJSON?a("json-view",{key:s,attrs:{closed:t.closed,json:e.value,jsonKey:e.key,isLast:s===t.items.length-1}}):a("p",{key:s,staticClass:"json-item"},[a("span",{staticClass:"json-key"},[t._v(" "+t._s(t.isArray?"":'"'+e.key+'"')+" ")]),t._v(" : "),a("span",{staticClass:"json-value"},[t._v(" "+t._s(e.value+(s===t.items.length-1?"":","))+" ")])])]})),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.innerclosed,expression:"!innerclosed"}],staticClass:"body-line"})],2):t._e(),!t.innerclosed&&t.length?a("p",{staticClass:"last-line"},[a("span",[t._v(t._s(t.subfix))])]):t._e()])])])},h=[],p=(a("d81d"),a("a9e3"),a("d3b7"),a("25f0"),{name:"jsonView",props:{json:[Object,Array],jsonKey:{type:String,default:""},closed:{type:Boolean,default:!1},isLast:{type:Boolean,default:!0},fontSize:{type:Number,default:13}},created:function(){var t=this;this.innerclosed=this.closed,this.$watch("closed",(function(){t.innerclosed=t.closed}))},data:function(){return{innerclosed:!0}},methods:{isObjectOrArray:function(t){var e=Object.prototype.toString.call(t),a="[object Array]"===e||"[object Object]"===e;return a},toggleClose:function(){this.innerclosed?this.innerclosed=!1:this.innerclosed=!0}},computed:{isArray:function(){return"[object Array]"===Object.prototype.toString.call(this.json)},length:function(){return this.isArray?this.json.length:Object.keys(this.json).length},subfix:function(){return(this.isArray?"]":"}")+(this.isLast?"":",")},prefix:function(){return this.isArray?"[":"{"},items:function(){var t=this;if(this.isArray)return this.json.map((function(e){var a=t.isObjectOrArray(e);return{value:a?e:JSON.stringify(e),isJSON:a,key:""}}));var e=this.json;return Object.keys(e).map((function(a){var s=e[a],i=t.isObjectOrArray(s);return{value:i?s:JSON.stringify(s),isJSON:i,key:a}}))}}}),m=p,v=(a("f719"),a("2877")),f=Object(v["a"])(m,u,h,!1,null,null,null),g=f.exports,_=a("4328"),b=a.n(_),y={name:"trace-management",components:{JsonView:g},data:function(){var t=this;return{advanced:!1,clickId:0,data:[],detail:void 0,search:{},dates:[],loading:!1,limit:30,key:2,requestBody:{},responseBody:{},responseDetail:!1,requestDetail:!1,pagination:{onChange:function(e){var a={offset:t.limit*(e-1),limit:t.limit};Object.keys(t.search).forEach((function(e){void 0!==t.search[e]&&null!=t.search[e]&&""!==t.search[e]&&(a[e]=t.search[e])})),t.getList(a)},pageSize:30,position:"top",size:"small"}}},created:function(){var t={offset:0,limit:this.limit};this.getList(t)},methods:{change:function(t){this.key=t},query:function(){var t=this;this.loading=!0;var e={};Object.keys(this.search).forEach((function(a){void 0!==t.search[a]&&null!=t.search[a]&&""!==t.search[a]&&(e[a]=t.search[a])})),this.getList(e)},redo:function(){this.loading=!0,this.search={},this.dates=[],this.detail=void 0;var t={offset:0,limit:this.limit};this.getList(t)},handleDateChange:function(t,e){2===t.length?(this.dates=t,this.search.startTime=new Date(e[0]+" 00:00:00").getTime(),this.search.endTime=new Date(e[1]+" 23:59:59").getTime()):(this.dates=[],this.search.startTime=void 0,this.search.endTime=void 0)},toDetail:function(t){var e=this;this.clickId=t;var a={id:t};d(a).then((function(t){e.detail=t;var a=JSON.parse(t.request),s=JSON.parse(t.response);s.body?e.responseBody=b.a.parse(s.body):e.responseBody={},a.body?e.requestBody=b.a.parse(a.body):(e.requestBody="",e.requestDetail=!0)}))},getList:function(t){var e=this;c(t).then((function(t){e.loading=!1,e.data=t.list,e.toDetail(t.list[0].id),e.pagination.total=t.total}))},handleResponseChange:function(){this.responseDetail=!this.responseDetail},handleRequestChange:function(){this.requestDetail=!this.requestDetail},toggleAdvanced:function(){this.advanced=!this.advanced}}},k=y,j=(a("81c6"),Object(v["a"])(k,s,i,!1,null,"28ff2f06",null));e["default"]=j.exports},"81c6":function(t,e,a){"use strict";a("a3dc")},a3dc:function(t,e,a){},f719:function(t,e,a){"use strict";a("37c2")}}]);